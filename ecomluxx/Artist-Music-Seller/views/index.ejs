<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet" href="./stylesheets/mainIndex/music.css">
<link rel="stylesheet" href="./stylesheets/mainIndex/card.css">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;700&display=swap" rel="stylesheet">



<div class="wrapper">
    <header class="header" >
        <nav class="navbar" style="background: none !important; box-shadow: none;" >
            <ul>
                <li> 
                   <a href="https://mertyourtalent.co.za"> <img src="/images/admin/logo2.png" style="height: 60px;" alt=""></a>  

                </li>
            </ul>
        </nav>
        <div class="hero-nav">
            <div class="heading">
               <h1 > Mert Your Talent </h1>
               <h1>Cape Town </h1>
            </div>
            <div class="form-buttons">
                <button class="btnns" onclick="signupBtn()" >  Sign Up </button>
                <button class="btnns1 exp" onclick="signinBtn()" > Sign In </button>
            </div>

        </div>
    </header>
    <div class="media-content"> </div>
    <!--  -->   
<div class="container-fluid featured_artist">
<div class="row featured_art">
  <div class="col-md-12">
    <h1> Featured Playlist </h1>
    <p> Mert your talent network provides a recording space for artists around the globe to explore their passion and give wings to their ideas. </p>
  </div>

</div>
<div class="row append_top_music" id="append_top_music">
<!--     
    <div class="col-md-4">
        <div class="card user-card">
            <div class="card-header">
                <h5>Artist</h5>
            </div>
            <div class="card-block">
                <div class="user-image">
                    <img src="https://img.apmcdn.org/871dda86bfe2251e4fe5514562da006647a8115d/uncropped/df6bb3-20110211-bob-marley.jpg" class="img-radius" alt="User-Profile-Image">
                </div>
                <h6 class="f-w-600 m-t-25 m-b-10">Bob Marley</h6>
                <p class="text-muted">Artist | Male | Jamaica</p>
                <hr>
                <p class="text-muted m-t-15">Track Level: 80%</p>
                <ul class="list-unstyled activity-leval">
                    <li class="active"></li>
                    <li class="active"></li>
                    <li class="active"></li>
                    <li></li>
                    <li></li>
                </ul>
                <div class="bg-c-blue counter-block m-t-10 p-20">
                    <div class="row">
                        <div class="col-4">
                            <i class="fa fa-comment"></i>
                            <p>1256</p>
                        </div>
                        <div class="col-4">
                            <i class="fa fa-user"></i>
                            <p>8562</p>
                        </div>
                        <div class="col-4">
                            <i class="fa fa-suitcase"></i>
                            <p>189</p>
                        </div>
                    </div>
                </div>
                <p class="m-t-15 text-muted">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                <hr>
                <div class="row justify-content-center user-social-link">
                    <div class="col-auto"><a href="#!"><i class="fa fa-facebook text-facebook"></i></a></div>
                    <div class="col-auto"><a href="#!"><i class="fa fa-twitter text-twitter"></i></a></div>
                    <div class="col-auto"><a href="#!"><i class="fa fa-dribbble text-dribbble"></i></a></div>
                </div>
            </div>
        </div>
    </div>
     -->
   
</div>
</div>
    <!--  -->
    <!--  -->
    <!-- <div class="artist_hero">
        <div class="artist_head">
            <h1> Artists on Musico </h1>
        </div>
        <div class="attist_para">
            <p>Find the most popular artists and listen their music on Bepop, Create your own playlist when listening to them.</p>
        </div>
        <div class="form-buttons">
            <button class="btnns1 exp" > Explore More </button>
            <button class="btnns1 exp"> Purchase </button>
        </div>
    </div> -->
    <!--  -->
    <div class="footer">
        <div class="servises">
            <div>
                <!-- <h2> Services </h2> -->
            </div>
            <div class="form_services">
                <input type="text" placeholder="Enter Your Email" class="subscribe_btn" name="" id="subscribe_input_id">
                <button onclick="subscribeCall()" class="subs_btn">Subscribe</button>
              
            </div>
            <div class="">
                Esteem spirit temper too say adieus who direct esteem esteems luckily.
            </div>
        </div>
        <div class="contact_us">
            <div>
                <h2> Contact Us </h2>
            </div>
            <div class="cantact_list">
                <ul>
                    <li>support@mertyourtalent.co.za</li>
                    <li>+91 7987231472</li>
                    <li>B53, Sector 62 Noida Uttar Pradesh</li>

                </ul>
            </div>
        </div>
    </div>

</div>

<!-- Sign In Model -->
<div id="id01" class="w3-modal w3-animate-opacity"  >
    <div class="w3-modal-content w3-card-4">
      <header class="w3-container model_header"> 
        <span onclick="document.getElementById('id01').style.display='none'" 
        class="w3-button w3-large w3-display-topright closemodel_signUp ">&times;</span>
        <h2 > 
            <!-- <img src="https://preview.colorlib.com/theme/musico/img/logo.png" alt="">     -->
            <img src="/images/admin/logo2.png" style="height: 60px;" alt="">  
        </h2>
      </header>
      <div class="w3-container">
       <div class="row form_signup_conatiner">
           <div class="col-md-6">
                <label for=""> Full Name   </label>
                <input type="text" placeholder="Full Name" id="fullname" class="form-control" >
           </div>
           <div class="col-md-6">
            <label for=""> Artist Type </label>
            <!-- <input type="text" placeholder="Artist Type" id="airtistType" class="form-control" > -->
            <select name="" id="airtistType" class="form-control" style="background: none" >
              <option value=""> Select Artist </option>
              <option value="main"> Main </option>
              <option value="featured"> Featured </option>
            </select>
          </div>
          <div class="col-md-6 mt-2">
            <label for=""> Email <span style="color: red;" >*</span> <span style="color: red;" class="display_none" id="email_err-01" >Valid email required !</span> </label>
            <input type="email" placeholder="Email" id="signUpEmail" class="form-control" >
          </div>
          <div class="col-md-6 mt-2">
            <label for=""> Main Genre </label>
            <!-- <input type="text" placeholder="Main Genre" id="mainGenre" class="form-control" > -->
            <select name="" id="mainGenre" class="form-control" style="background: none"  >
              <option value=""> Select Genre </option>
              <option value="African">African</option>
              <option value="Afrobeat">Afrobeat</option>
              <option value="Aggressive">Aggressive</option>
              <option value="Afrikaans">Afrikaans</option>
              <option value="Blues">Blues</option>
              <option value="Classical">Classical</option>
              <option value="Electronic">Electronic</option>
              <option value="House">House</option>
              <option value="Hip Hop">Hip Hop</option>
              <option value="Jazz">Jazz</option>
              <option value="Kwaito">Kwaito</option>
              <option value="Pop">Pop</option>
              <option value="Religious">Religious</option>
              <option value="R&B">R&B</option>
              <option value="Rap">Rap</option>
              <option value="Traditional">Traditional</option>
            </select>
          </div>
        
          <div class="col-md-6 mt-2">
            <label for=""> Country </label>
            <!-- <input type="text" placeholder="Country" id="Country" class="form-control" > -->
            <select name="" id="Country" class="form-control" style="background: none"  >
              <option value=""> Select Country </option>
              <% countryData.forEach(element=>{
                %>
              <option value="<%=element.name%>"> <%=element.name%> </option>

              <%
              }) 

              %>
              <option value=""></option>
            </select>
          </div>
          <div class="col-md-6 mt-2">
            <label for=""> Password <span style="color: red;" >*</span> <span style="color: red;" id="pass_err-01"class="display_none" >Min 6 character required !</span> </label>
            <input type="password" placeholder="Password" id="signUpPassword" class="form-control" />
          </div>
          <div class="col-md-6 mt-3">
              <input type="checkbox" id="isProRegistered"  />
              <label for="" class="terms_conditions"> Are you registered with a PRO! </label>
          </div>
          <div class="col-md-12 mt-2">
                <input type="checkbox" id="termsandconditions"  /> 
                <label for="" class="terms_conditions" > I accept the <a href="artist/terms-and-conditions" target="_blank" class="term_and_link" >Terms and Conditions</a> </label>
                <p class="text-danger" id="text_err" style="display: none;" > Please accept the Terms and Conditions to signup ! </p>
          </div>
          <div class="col-md-12 mt-4 signupbtn">
            <input type="submit" value="Sign Up" id="signUpBtn" class="form-control" >
          </div>

       </div>
      </div>
      <footer class="w3-container model_footer1">
        <p class="signUpError" ></p>
      </footer>
    </div>
  </div>
</div>
<!-- Model End -->
   <!-- Sign Up Model -->
   <div id="id02" class="w3-modal w3-animate-opacity"  style="display: none !important;">
    <div class="w3-modal-content w3-card-4">
      <header class="w3-container model_header"> 
        <span onclick="document.getElementById('id02').style.display='none'" 
        class="w3-button w3-large w3-display-topright closemodel_signUp ">&times;</span>
        <h2 > 
            <img src="/images/admin/logo2.png" style="height: 60px;" alt="">  
   
        </h2>
      </header>
      <div class="w3-container">
       <div class="row form_signup_conatiner">
           <div class="col-md-12">
                <label for=""> Email </label>
                <input type="text" placeholder="Email" value="" id="signInEmail" class="form-control" >
           </div>
           <div class="col-md-12 mt-2">
            <label for=""> Password </label>
            <input type="password" placeholder="Password" value="" id="signInPassword" class="form-control" >
          </div>
          <div class="col-md-12 mt-4 signupbtn">
            <input type="submit" value="Sign In" id="signInBtnnn" class="form-control" >
          </div>

       </div>
      </div>
      <footer class="w3-container model_footer1">
        <p id="errSigninnn" > </p>
        <a onclick="forgetPassBtn()" style="cursor: pointer;" > Forget password ? </a>
      </footer>
    </div>
  </div>
  <!-- Forget Password -->
  <div id="id03" class="w3-modal w3-animate-opacity" style="display: none !important;">
    <div class="w3-modal-content w3-card-4">
      <header class="w3-container model_header"> 
        <span onclick="document.getElementById('id03').style.display='none'" 
        class="w3-button w3-large w3-display-topright closemodel_signUp ">&times;</span>
        <h2 > 
            <img src="/images/admin/logo2.png" style="height: 60px;" alt="">  
  
        </h2>
      </header>
      <div class="w3-container">
       <div class="row form_signup_conatiner">
           <div class="col-md-12">
                <label for=""> Email </label>
                <input type="text" placeholder="Email" id="forgetEmail" class="form-control" >
           </div>
          
          
          <div class="col-md-12 mt-4 signupbtn">
            <input type="submit" value="Forget Now" id="forgetPassword" class="form-control" >
          </div>

       </div>
      </div>
      <footer class="w3-container model_footer1">
        <p id="errForget" > </p>
        <!-- <a href=""> Sign In </a> -->
      </footer>
    </div>
  </div>
</div>
<!-- Model End -->


<script src="./javascripts/AdiminJs/signup.js"></script>

<script>
  //  var mailformat = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
  //   if(inputText.value.match(mailformat))
    
    let bodyTag = document.getElementsByTagName("body")[0];
function signinBtn(){
    document.getElementById('id02').style.display='block';
}
function signupBtn(){
    document.getElementById('id01').style.display='block';
}
function forgetPassBtn(){
    document.getElementById('id03').style.display='block';
    document.getElementById('id02').style.display='none';

}

async function getTopmusic(){
    let getTopMus = await fetch(`/shopify/most/viewed/music`);
    let data = await getTopMus.json();
   // console.log(data);
    if(data.message == "flag1"){
      let mapData = data.data;
        console.log(mapData);
        let percent = 100;
        mapData.forEach((element, index)=> {
           percent = percent - (index * 2);
           console.log(percent);
            let strHtml = `<div class="col-md-4 "><div class="card user-card"><div class="card-header"><h5></h5></div><div class="card-block artist_top_view"><div class="user-image"> <img src="${element?.MusicImage}" class="img-radius" alt="User-Profile-Image"></div><h6 class="f-w-600 m-t-25 m-b-10 text-white">${element?.ArtistName}</h6><p class="text-white">Artist | ${element?.Country}</p><hr><p class="text-white m-t-15">Track Level: ${percent}%</p><ul class="list-unstyled activity-leval">
                <li class="active"></li>
                <li class="active"></li>
                <li class="${percent >= 55 ? 'active' : ''}"></li>
                <li class="${percent >= 90 ? 'active' : ''}"></li>
                <li class="${percent == 100 ? 'active' : ''}"></li></ul> <audio src="${element?.MusicFile}" id="audio" class="music_audio_tag" controls>audio element not supported</audio><hr></div></div></div>`;
                if(element){
                  document.getElementById("append_top_music").insertAdjacentHTML( 'beforeend', strHtml)

                }
        })

    }
}
getTopmusic()

async function subscribeCall(){
  let email = document.getElementById("subscribe_input_id").value;
  let eamilInsert = await fetch('/shopify/user/email/save',{
    method:"POST",
    headers: {
      'Content-Type': 'application/json'
      // 'Content-Type': 'application/x-www-form-urlencoded',
    },
    body : JSON.stringify({email})
  });
  let emailData = await eamilInsert.json();
     // console.log(emailData);
      if(emailData.message == "flag1"){
        alert("Thanks for subscribing !")
      }else if(emailData.message == "flag2"){
        alert("Email already subscribed !")
      }
      document.getElementById("subscribe_input_id").value = '';
//  alert(email)
}

</script>
